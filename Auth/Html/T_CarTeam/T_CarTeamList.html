<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>T_CarTeam列表 </title>

    <link href="../../JavaScript/bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="../../JavaScript/jQuery/jquery-3.4.1.min.js"></script>
    <script src="../../JavaScript/layer/layer.js"></script>
    <script src="../../JavaScript/Common/Pagination.js"></script>
    <script type='text/javascript'>
        $(function () {
            Init();
            $('#btnSearch').on('click', btnSearch_OnClick);
            $('#btnClear').on('click', btnClear_OnClick);
            $('#btnImport').on('click', btnImport_OnClick);
            $('#fileImport').on('change', fileImport_OnChange);
        });

        function fileImport_OnChange() {

            $.ajax({
                type: 'post'
                , url: '/Handler/T_CarTeam.ashx?RequestMethod=Import'
                , success: function (pData) {
                    if (pData === '1') {
                        layer.alert("导入成功！", { icon: 1 });
                        Init();

                    } else {
                        layer.alert("导入失败！", { icon: 1 });
                        Init();

                    }
                }
            });
        }

        function btnImport_OnClick() {
            $("#fileImport").click();
        }

        function btnSearch_OnClick() {
            Init();
        }

        function btnClear_OnClick() {
            $('#ID').val('');
            $('#Name').val('');
            $('#EditMan').val('');
            $('#EditDate').val('');
        }

        function Init() {
            var ID = $('#ID').val();
            var Name = $('#Name').val();
            var EditMan = $('#EditMan').val();
            var EditDate = $('#EditDate').val();
            $('#T_CarTeamList').empty();
            var lPConfig = new PaginationConfiguration();
            lPConfig.RequestUrl = '/Handler/T_CarTeam.ashx?RequestMethod=SelectPage'
            lPConfig.RequestUrl += '&ID=' + ID;
            lPConfig.RequestUrl += '&Name=' + Name;
            lPConfig.RequestUrl += '&EditMan=' + EditMan;
            lPConfig.RequestUrl += '&EditDate=' + EditDate;
            lPConfig.PageContainerID = 'T_CarTeamList';
            var IDCol = new PaginationColumnConfiguration();
            IDCol.HeaderText = '主键';
            IDCol.Type = 'TXT';
            IDCol.DataField = 'ID';
            lPConfig.Columns.push(IDCol);
            var NameCol = new PaginationColumnConfiguration();
            NameCol.HeaderText = '名称';
            NameCol.Type = 'TXT';
            NameCol.DataField = 'Name';
            lPConfig.Columns.push(NameCol);
            var EditManCol = new PaginationColumnConfiguration();
            EditManCol.HeaderText = '编辑人';
            EditManCol.Type = 'TXT';
            EditManCol.DataField = 'EditMan';
            lPConfig.Columns.push(EditManCol);
            var EditDateCol = new PaginationColumnConfiguration();
            EditDateCol.HeaderText = '编辑时间';
            EditDateCol.Type = 'TXT';
            EditDateCol.DataField = 'EditDate';
            lPConfig.Columns.push(EditDateCol);
            var EditCol = new PaginationColumnConfiguration();
            EditCol.HeaderText = '编辑';
            EditCol.Type = 'BTN';
            EditCol.DataField = '编辑';
            EditCol.CssClass = 'btn btn-success';
            EditCol.OnClickEventHandler = btnEdit_OnClick;
            lPConfig.Columns.push(EditCol);
            var DelCol = new PaginationColumnConfiguration();
            DelCol.HeaderText = '删除';
            DelCol.Type = 'BTN';
            DelCol.DataField = '删除';
            DelCol.CssClass = 'btn btn-success';
            DelCol.OnClickEventHandler = btnDel_OnClick;
            lPConfig.Columns.push(DelCol);
            var T_CarTeamListPagination = new Pagination(lPConfig);
            T_CarTeamListPagination.RequestData(1);
        }
        function btnEdit_OnClick(event) {
            layer.open({
                type: 2
            , title: '编辑'
            , content: 'T_CarTeamEdit.html?ID=' + event.data.RowData.ID
            , area: ['800px', '600px']
            });
        }
        function btnDel_OnClick(event) {
            layer.confirm('您确认要删除此条记录吗？', { icon: 3, title: '提示' }, function (index) {
                $.ajax({
                    type: 'get'
                , url: '/Handler/T_CarTeam.ashx?RequestMethod=Delete&ID=' + event.data.RowData.ID
                , success: function (pData) {
                    if (pData == '1') {
                        layer.alert('删除成功！', { icon: 1 });
                        Init();
                    } else {
                        layer.alert('删除失败！', { icon: 2 });
                    }
                }
                });
            });
        }
        function btnNew_OnClick() {
            layer.open({
                type: 2
            , title: '新增'
            , content: 'T_CarTeamNew.html'
            , area: ['800px', '600px']
            });
        }
    </script>
</head>
<body>
    <div class='form-inline' style='padding:10px;'>
        <div class='form-group'>
            <label for='ID'>主键</label>
            <input type='text' id='ID' name='ID' class='form-control' />
        </div>
        <div class='form-group'>
            <label for='Name'>名称</label>
            <input type='text' id='Name' name='Name' class='form-control' />
        </div>
        <div class='form-group'>
            <label for='EditMan'>编辑人</label>
            <input type='text' id='EditMan' name='EditMan' class='form-control' />
        </div>
        <div class='form-group'>
            <label for='EditDate'>编辑时间</label>
            <input type='text' id='EditDate' name='EditDate' class='form-control' />
        </div>
        <input type='button' class='btn btn-success' value='检索' id='btnSearch' />
        <input type='button' class='btn btn-primary' value='清空' id='btnClear' />
    </div>
    <div style='padding:10px'>
        <input type='button' id='btnNew' class='btn btn-success' value='新增' />
        <input type='button' id='btnImport' class='btn btn-success' value='导入' />
        <input type='button' id='btnExport' class='btn btn-success' value='导出' />

        <input type="file" id="fileImport" name="fileImport" accept=".xls,.xlsx" style="display:none;" />

        <div id='T_CarTeamList' style='margin-top:20px;'></div>
    </div>
</body>
</html>
